CC		= @CC@
DEFS		= @DEFS@
CFLAGS		= @CFLAGS@ $(DEFS)
LDFLAGS		= @LDFLAGS@
LIBS		= @LIBS@
EXE		= @EXEEXT@

prefix		= @prefix@
exec_prefix     = @exec_prefix@
datarootdir	= @datarootdir@
bindir          = @bindir@
mandir		= @mandir@/man1

RM		= @RM@
INSTALL		= @INSTALL@

TARGET		= mbuffer$(EXE)
SOURCES		= mbuffer.c
OBJECTS		= $(SOURCES:.c=.o)

all: $(TARGET)

$(OBJECTS): config.h Makefile

$(TARGET): $(OBJECTS)
	$(CC) $(CFLAGS) $(LDFLAGS) $(OBJECTS) $(LIBS) -o $@

clean:
	-$(RM) $(OBJECTS)

distclean: clean
	-$(RM) $(TARGET) config.h config.log \
	config.status Makefile mbuffer.1 core

install: $(TARGET)
	-$(INSTALL) -d $(DESTDIR)$(bindir)
	$(INSTALL) $(TARGET) $(DESTDIR)$(bindir)
	-$(INSTALL) -d $(DESTDIR)$(mandir)
	$(INSTALL) mbuffer.1 $(DESTDIR)$(mandir)

lint:
	lint $(CFLAGS) mbuffer.c
